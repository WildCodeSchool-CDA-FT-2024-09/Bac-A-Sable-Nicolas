BEGIN;

CREATE TABLE "status" (
  "id" INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  "name" VARCHAR(100) NOT NULL UNIQUE
);

CREATE TABLE "repo" (
  "id" INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  "name" VARCHAR(255) NOT NULL UNIQUE,
  "url" TEXT NOT NULL UNIQUE,
  "status_id" INT FOREIGN KEY NOT NULL REFERENCES "status"("id")
);

CREATE TABLE "comment" (
  "id" INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  "content" TEXT NOT NULL,
  "repo_id" INT FOREIGN KEY NOT NULL REFERENCES "repo"("id")
);

CREATE TABLE "language" (
  "id" INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  "name" VARCHAR(20) NOT NULL UNIQUE
);

CREATE TABLE "repo_language" (
  "id" INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
  "repo_id" INT FOREIGN KEY NOT NULL REFERENCES "repo"("id"),
  "language_id" INT FOREIGN KEY NOT NULL REFERENCES "language"("id")
);

COMMIT;